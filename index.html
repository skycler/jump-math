<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="Jump Math - A fun 2D platformer game with math puzzles">
    <meta name="theme-color" content="#2d5a27">
    <title>Jump Math</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="stylesheet" href="styles.css">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PET6CKGRN2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-PET6CKGRN2');
    </script>
</head>
<body>
    <div id="game-container">
        <div id="menu-screen" class="screen active">
            <h1>ğŸ® Jump Math</h1>
            <div class="menu-section">
                <h2>Select Theme</h2>
                <div class="theme-buttons">
                    <button class="theme-btn" data-theme="forest">ğŸŒ² Forest</button>
                    <button class="theme-btn" data-theme="snow">ğŸ”ï¸ Snowy Mountains</button>
                    <button class="theme-btn" data-theme="beach">ğŸ–ï¸ Beach</button>
                    <button class="theme-btn" data-theme="city">ğŸ™ï¸ City</button>
                </div>
            </div>
            <div class="menu-section">
                <h2>Math Settings</h2>
                <div class="math-config">
                    <label>Multiplication Range:</label>
                    <div class="range-inputs">
                        <input type="number" id="min-mult" min="1" max="12" value="1"> to
                        <input type="number" id="max-mult" min="1" max="12" value="12">
                    </div>
                </div>
            </div>
            <div class="menu-section">
                <h2>Game Mode</h2>
                <div class="mode-buttons">
                    <button class="mode-btn selected" data-mode="timed">â±ï¸ Timed Challenge</button>
                    <button class="mode-btn" data-mode="target">ğŸ¯ Target Score</button>
                </div>
                <div id="mode-config-timed" class="mode-config">
                    <label>Time Limit:</label>
                    <div class="mode-inputs">
                        <select id="time-limit">
                            <option value="60">1 minute</option>
                            <option value="120" selected>2 minutes</option>
                            <option value="180">3 minutes</option>
                            <option value="300">5 minutes</option>
                        </select>
                    </div>
                    <p class="mode-desc">Score as many points as possible before time runs out!</p>
                </div>
                <div id="mode-config-target" class="mode-config" style="display: none;">
                    <label>Target Score:</label>
                    <div class="mode-inputs">
                        <select id="target-score">
                            <option value="5">5 points</option>
                            <option value="10" selected>10 points</option>
                            <option value="15">15 points</option>
                            <option value="20">20 points</option>
                        </select>
                    </div>
                    <p class="mode-desc">Reach the target as fast as possible!</p>
                </div>
            </div>
            <button id="start-btn" class="primary-btn">Start Game</button>
            <div class="controls-info">
                <h3>Controls</h3>
                <p>â¬†ï¸ / Space - Jump</p>
                <p>â¬…ï¸ â¡ï¸ - Move</p>
            </div>
        </div>

        <div id="game-screen" class="screen">
            <div id="hud">
                <div id="score">Score: 0</div>
                <div id="timer">â±ï¸ 2:00</div>
                <div id="theme-display"></div>
                <button id="pause-btn">â¸ï¸</button>
            </div>
            <canvas id="game-canvas"></canvas>
            <div id="mobile-controls">
                <button id="btn-left" class="control-btn">â¬…ï¸</button>
                <button id="btn-jump" class="control-btn">â¬†ï¸</button>
                <button id="btn-right" class="control-btn">â¡ï¸</button>
            </div>
        </div>

        <div id="puzzle-modal" class="modal">
            <div class="modal-content puzzle-content">
                <div id="puzzle-icon" class="puzzle-icon">ğŸª™</div>
                <div id="puzzle-question" class="puzzle-question"></div>
                <div class="puzzle-input-row">
                    <input type="number" id="puzzle-answer" inputmode="numeric">
                    <button id="submit-answer" class="submit-btn">âœ“</button>
                </div>
            </div>
        </div>

        <div id="screen-effect" class="screen-effect"></div>

        <div id="pause-modal" class="modal">
            <div class="modal-content">
                <h2>Game Paused</h2>
                <button id="resume-btn" class="primary-btn">Resume</button>
                <button id="quit-btn" class="secondary-btn">Quit to Menu</button>
            </div>
        </div>

        <div id="gameover-modal" class="modal">
            <div class="modal-content">
                <h2 id="gameover-title">Game Over!</h2>
                <p id="gameover-message"></p>
                <p>Final Score: <span id="final-score">0</span></p>
                <p id="final-time" style="display: none;">Time: <span id="final-time-value">0:00</span></p>
                <button id="retry-btn" class="primary-btn">Play Again</button>
                <button id="menu-btn" class="secondary-btn">Main Menu</button>
            </div>
        </div>
    </div>

    <!-- Game Scripts (load in order) -->
    <script src="js/config.js"></script>
    <script src="js/audio.js"></script>
    <!-- Renderers (loaded before entities that depend on them) -->
    <script src="js/entities/renderers/obstacle-renderers.js"></script>
    <script src="js/entities/renderers/decoration-renderers.js"></script>
    <!-- Entity classes -->
    <script src="js/entities/player.js"></script>
    <script src="js/entities/coin.js"></script>
    <script src="js/entities/obstacle.js"></script>
    <script src="js/entities/platform.js"></script>
    <script src="js/entities/decoration.js"></script>
    <!-- Core game logic -->
    <script src="js/engine.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/main.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed:', err));
        }
    </script>
</body>
</html>
